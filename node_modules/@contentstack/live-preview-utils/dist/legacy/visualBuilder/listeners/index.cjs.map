{"version":3,"sources":["../../../../src/visualBuilder/listeners/index.ts"],"sourcesContent":["import { VisualBuilder } from \"..\";\nimport handleBuilderInteraction from \"./mouseClick\";\nimport handleMouseHover, {\n    hideCustomCursor,\n    hideHoverOutline,\n    showCustomCursor,\n} from \"./mouseHover\";\nimport EventListenerHandlerParams from \"./types\";\n\ntype AddEventListenersParams = Omit<\n    EventListenerHandlerParams,\n    \"event\" | \"eventDetails\"\n>;\n\ntype RemoveEventListenersParams = Omit<\n    EventListenerHandlerParams,\n    \"event\" | \"eventDetails\"\n>;\nconst eventHandlers = {\n    click: (params: AddEventListenersParams) => (event: MouseEvent) => {\n        handleBuilderInteraction({\n            event: event,\n            overlayWrapper: params.overlayWrapper,\n            visualBuilderContainer: params.visualBuilderContainer,\n            previousSelectedEditableDOM:\n                VisualBuilder.VisualBuilderGlobalState.value\n                    .previousSelectedEditableDOM,\n            focusedToolbar: params.focusedToolbar,\n            resizeObserver: params.resizeObserver,\n        });\n    },\n    mousemove: (params: AddEventListenersParams) => (event: MouseEvent) => {\n        handleMouseHover({\n            event: event,\n            overlayWrapper: params.overlayWrapper,\n            visualBuilderContainer: params.visualBuilderContainer,\n            customCursor: params.customCursor,\n        });\n    },\n    mouseleave: (params: AddEventListenersParams) => () => {\n        hideCustomCursor(params.customCursor);\n        hideHoverOutline(params.visualBuilderContainer);\n    },\n    mouseenter: (params: AddEventListenersParams) => () => {\n        showCustomCursor(params.customCursor);\n    },\n};\nconst eventListenersMap = new Map<string, EventListener>();\nexport function addEventListeners(params: AddEventListenersParams): void {\n    const clickHandler = eventHandlers.click(params);\n    const mousemoveHandler = eventHandlers.mousemove(params);\n    const mouseleaveHandler = eventHandlers.mouseleave(params);\n    const mouseenterHandler = eventHandlers.mouseenter(params);\n\n    eventListenersMap.set(\"click\", clickHandler as EventListener);\n    eventListenersMap.set(\"mousemove\", mousemoveHandler as EventListener);\n    eventListenersMap.set(\"mouseleave\", mouseleaveHandler);\n    eventListenersMap.set(\"mouseenter\", mouseenterHandler);\n\n    window.addEventListener(\"click\", clickHandler, { capture: true });\n    window.addEventListener(\"mousemove\", mousemoveHandler);\n    document.documentElement.addEventListener(\"mouseleave\", mouseleaveHandler);\n    document.documentElement.addEventListener(\"mouseenter\", mouseenterHandler);\n}\n\nexport function removeEventListeners(params: RemoveEventListenersParams): void {\n    const clickHandler = eventListenersMap.get(\"click\");\n    const mousemoveHandler = eventListenersMap.get(\"mousemove\");\n    const mouseleaveHandler = eventListenersMap.get(\"mouseleave\");\n    const mouseenterHandler = eventListenersMap.get(\"mouseenter\");\n\n    if (clickHandler) {\n        window.removeEventListener(\"click\", clickHandler, { capture: true });\n    }\n    if (mousemoveHandler) {\n        window.removeEventListener(\"mousemove\", mousemoveHandler);\n    }\n    if (mouseleaveHandler) {\n        document.documentElement.removeEventListener(\n            \"mouseleave\",\n            mouseleaveHandler\n        );\n    }\n    if (mouseenterHandler) {\n        document.documentElement.removeEventListener(\n            \"mouseenter\",\n            mouseenterHandler\n        );\n    }\n\n    eventListenersMap.clear();\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAA8B;AAC9B,wBAAqC;AACrC,wBAIO;AAYP,IAAM,gBAAgB;AAAA,EAClB,OAAO,CAAC,WAAoC,CAAC,UAAsB;AAC/D,0BAAAA,SAAyB;AAAA,MACrB;AAAA,MACA,gBAAgB,OAAO;AAAA,MACvB,wBAAwB,OAAO;AAAA,MAC/B,6BACI,uBAAc,yBAAyB,MAClC;AAAA,MACT,gBAAgB,OAAO;AAAA,MACvB,gBAAgB,OAAO;AAAA,IAC3B,CAAC;AAAA,EACL;AAAA,EACA,WAAW,CAAC,WAAoC,CAAC,UAAsB;AACnE,0BAAAC,SAAiB;AAAA,MACb;AAAA,MACA,gBAAgB,OAAO;AAAA,MACvB,wBAAwB,OAAO;AAAA,MAC/B,cAAc,OAAO;AAAA,IACzB,CAAC;AAAA,EACL;AAAA,EACA,YAAY,CAAC,WAAoC,MAAM;AACnD,4CAAiB,OAAO,YAAY;AACpC,4CAAiB,OAAO,sBAAsB;AAAA,EAClD;AAAA,EACA,YAAY,CAAC,WAAoC,MAAM;AACnD,4CAAiB,OAAO,YAAY;AAAA,EACxC;AACJ;AACA,IAAM,oBAAoB,oBAAI,IAA2B;AAClD,SAAS,kBAAkB,QAAuC;AACrE,QAAM,eAAe,cAAc,MAAM,MAAM;AAC/C,QAAM,mBAAmB,cAAc,UAAU,MAAM;AACvD,QAAM,oBAAoB,cAAc,WAAW,MAAM;AACzD,QAAM,oBAAoB,cAAc,WAAW,MAAM;AAEzD,oBAAkB,IAAI,SAAS,YAA6B;AAC5D,oBAAkB,IAAI,aAAa,gBAAiC;AACpE,oBAAkB,IAAI,cAAc,iBAAiB;AACrD,oBAAkB,IAAI,cAAc,iBAAiB;AAErD,SAAO,iBAAiB,SAAS,cAAc,EAAE,SAAS,KAAK,CAAC;AAChE,SAAO,iBAAiB,aAAa,gBAAgB;AACrD,WAAS,gBAAgB,iBAAiB,cAAc,iBAAiB;AACzE,WAAS,gBAAgB,iBAAiB,cAAc,iBAAiB;AAC7E;AAEO,SAAS,qBAAqB,QAA0C;AAC3E,QAAM,eAAe,kBAAkB,IAAI,OAAO;AAClD,QAAM,mBAAmB,kBAAkB,IAAI,WAAW;AAC1D,QAAM,oBAAoB,kBAAkB,IAAI,YAAY;AAC5D,QAAM,oBAAoB,kBAAkB,IAAI,YAAY;AAE5D,MAAI,cAAc;AACd,WAAO,oBAAoB,SAAS,cAAc,EAAE,SAAS,KAAK,CAAC;AAAA,EACvE;AACA,MAAI,kBAAkB;AAClB,WAAO,oBAAoB,aAAa,gBAAgB;AAAA,EAC5D;AACA,MAAI,mBAAmB;AACnB,aAAS,gBAAgB;AAAA,MACrB;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AACA,MAAI,mBAAmB;AACnB,aAAS,gBAAgB;AAAA,MACrB;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AAEA,oBAAkB,MAAM;AAC5B;","names":["handleBuilderInteraction","handleMouseHover"]}